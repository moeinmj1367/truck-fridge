<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ú©Ù†ØªØ±Ù„ ÛŒØ®Ú†Ø§Ù„ Ú©Ø§Ù…ÛŒÙˆÙ†</title>
    <style>
        body { font-family: Tahoma; text-align: center; padding: 20px; }
        .container { max-width: 500px; margin: 0 auto; }
        .status { background: #f0f0f0; padding: 15px; margin: 15px 0; border-radius: 10px; }
        .control-panel { background: #e8f4fd; padding: 20px; margin: 15px 0; border-radius: 10px; }
        button { padding: 12px 25px; margin: 8px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; }
        .on { background: #4CAF50; color: white; }
        .off { background: #f44336; color: white; }
        .temp { font-size: 24px; color: #2196F3; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸšš Ú©Ù†ØªØ±Ù„ ÛŒØ®Ú†Ø§Ù„ Ú©Ø§Ù…ÛŒÙˆÙ†</h1>
        
        <div class="status">
            <h3>ğŸŒ¡ï¸ Ø¯Ù…Ø§ÛŒ ÙØ¹Ù„ÛŒ: <span class="temp" id="temperature">0</span>Â°C</h3>
        </div>

        <div class="control-panel">
            <h3>âš¡ Ø®Ø±ÙˆØ¬ÛŒ Û± (Ú©Ù…Ù¾Ø±Ø³ÙˆØ±)</h3>
            <button class="on" onclick="controlOutput(1, 1)">Ø±ÙˆØ´Ù†</button>
            <button class="off" onclick="controlOutput(1, 0)">Ø®Ø§Ù…ÙˆØ´</button>
            <span id="status1">---</span>
        </div>

        <div class="control-panel">
            <h3>âš¡ Ø®Ø±ÙˆØ¬ÛŒ Û² (ÙÙ†â€ŒÙ‡Ø§)</h3>
            <button class="on" onclick="controlOutput(2, 1)">Ø±ÙˆØ´Ù†</button>
            <button class="off" onclick="controlOutput(2, 0)">Ø®Ø§Ù…ÙˆØ´</button>
            <span id="status2">---</span>
        </div>

        <div class="control-panel">
            <h3>ğŸ’¡ Ø®Ø±ÙˆØ¬ÛŒ Û³ (LED)</h3>
            <button class="on" onclick="controlOutput(3, 1)">Ø±ÙˆØ´Ù†</button>
            <button class="off" onclick="controlOutput(3, 0)">Ø®Ø§Ù…ÙˆØ´</button>
            <span id="status3">---</span>
        </div>

        <button onclick="updateStatus()" style="background: #2196F3; color: white; padding: 10px 20px;">
            ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª
        </button>
    </div>

    <script>
        const API_URL = "https://truck-fridge-api.onrender.com";

        async function controlOutput(outputNum, state) {
            try {
                const response = await fetch(API_URL + '/control', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        output: outputNum.toString(),
                        state: state
                    })
                });
                
                if (response.ok) {
                    alert(`Ø®Ø±ÙˆØ¬ÛŒ ${outputNum} ${state ? 'Ø±ÙˆØ´Ù†' : 'Ø®Ø§Ù…ÙˆØ´'} Ø´Ø¯`);
                    updateStatus();
                }
            } catch (error) {
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø¯Ø³ØªÙˆØ±');
            }
        }

        async function updateStatus() {
            try {
                const response = await fetch(API_URL + '/status');
                const data = await response.json();
                
                document.getElementById('temperature').textContent = data.temperature.toFixed(1);
                document.getElementById('status1').textContent = data.output1 ? ' ğŸŸ¢ Ø±ÙˆØ´Ù†' : ' ğŸ”´ Ø®Ø§Ù…ÙˆØ´';
                document.getElementById('status2').textContent = data.output2 ? ' ğŸŸ¢ Ø±ÙˆØ´Ù†' : ' ğŸ”´ Ø®Ø§Ù…ÙˆØ´';
                document.getElementById('status3').textContent = data.output3 ? ' ğŸŸ¢ Ø±ÙˆØ´Ù†' : ' ğŸ”´ Ø®Ø§Ù…ÙˆØ´';
            } catch (error) {
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª ÙˆØ¶Ø¹ÛŒØª');
            }
        }

        // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ø± 5 Ø«Ø§Ù†ÛŒÙ‡
        setInterval(updateStatus, 5000);
        updateStatus();
    </script>
</body>
</html>
